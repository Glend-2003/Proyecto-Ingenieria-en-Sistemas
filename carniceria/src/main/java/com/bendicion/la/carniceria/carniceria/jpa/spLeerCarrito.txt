CREATE DEFINER=`root`@`localhost` PROCEDURE `spLeerCarrito`(IN p_filtrarInactivos BOOLEAN)
BEGIN
    IF p_filtrarInactivos THEN
        -- Mostrar solo carritos activos (estadoCarrito = 1)
        SELECT 
            idCarrito,
            idUsuario,
            montoTotalCarrito,
            cantidadCarrito,
            estadoCarrito
        FROM 
            tbcarrito
        WHERE 
            estadoCarrito = 1
        ORDER BY 
            idCarrito DESC;
    ELSE
        -- Mostrar todos los carritos, ordenados por estado (activos primero)
        SELECT 
            idCarrito,
            idUsuario,
            montoTotalCarrito,
            cantidadCarrito,
            estadoCarrito
        FROM 
            tbcarrito
        ORDER BY 
            estadoCarrito DESC, 
            idCarrito DESC;
    END IF;
END